<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>05 å“ˆå¸Œè¡¨ï¼šç©ºé—´æ¢æ—¶é—´çš„é­”æ³•å¸ˆ</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0B1020;
            --text-color: #EAF2FF;
            --accent-color: #22D3EE; /* é’è‰² */
            --secondary-color: #A78BFA; /* ç´«è‰² */
            --highlight-bg: rgba(34, 211, 238, 0.1);
            --code-bg: #1a202c;
            --slide-width: 1920px;
            --slide-height: 1080px;
            --color-success: #10b981;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* åŠ¨ç”»æ§åˆ¶æ  */
        .anim-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
        }
        .anim-controls button {
            padding: 8px 16px;
            font-size: 20px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: var(--text-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 50px;
        }
        .anim-controls button:hover {
            background: var(--accent-color);
            color: #000;
            border-color: var(--accent-color);
        }
        .anim-progress {
            font-family: monospace;
            font-size: 20px;
            color: #888;
            margin-left: 10px;
            min-width: 80px;
        }
        
        /* ä¸¤æ•°ä¹‹å’ŒåŠ¨ç”»ç‰¹å®šæ ·å¼ */
        .array-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        .array-cell {
            width: 80px;
            height: 80px;
            border: 2px solid #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            position: relative;
            background: rgba(255,255,255,0.05);
            transition: all 0.3s;
            border-radius: 8px;
        }
        .array-cell.active {
            border-color: var(--accent-color);
            box-shadow: 0 0 15px var(--accent-color);
            background: rgba(34, 211, 238, 0.2);
            transform: scale(1.1);
        }
        .array-cell.found {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.3);
            box-shadow: 0 0 20px var(--color-success);
        }
        .array-index {
            position: absolute;
            bottom: -30px;
            font-size: 20px;
            color: #888;
            font-family: monospace;
        }
        
        .map-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            border: 2px dashed var(--secondary-color);
            padding: 20px;
            border-radius: 10px;
            min-height: 240px;
            background: rgba(167, 139, 250, 0.05);
            width: 100%;
        }
        .map-item {
            display: flex;
            justify-content: space-between;
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 24px;
            animation: fadeIn 0.5s;
        }
        .map-item.highlight {
            background: var(--color-success);
            color: #000;
            font-weight: bold;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .info-panel {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 26px;
            min-height: 100px;
            display: flex;
            align-items: center;
            border-left: 6px solid var(--accent-color);
        }

        body {
            margin: 0;
            background-color: #000;
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #app {
            width: var(--slide-width);
            height: var(--slide-height);
            background-color: var(--bg-color);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
        }

        /* è£…é¥°èƒŒæ™¯å…ƒç´  */
        .bg-decoration {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background-image: 
                radial-gradient(circle at 10% 10%, rgba(167, 139, 250, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 90%, rgba(34, 211, 238, 0.05) 0%, transparent 20%);
            pointer-events: none;
        }
        
        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: 50px 50px;
            background-image: linear-gradient(to right, rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            z-index: 0;
        }

        /* å¹»ç¯ç‰‡å®¹å™¨ */
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            padding: 80px 100px;
            flex-direction: column;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .slide.active {
            display: flex;
            opacity: 1;
        }

        /* é€šç”¨æ’ç‰ˆ */
        h1 {
            font-size: 150px;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #fff 0%, var(--secondary-color) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            font-size: 72px;
            margin-bottom: 60px;
            color: var(--accent-color);
            border-bottom: 4px solid var(--accent-color);
            padding-bottom: 20px;
            display: inline-block;
        }

        h3 {
            font-size: 48px;
            margin-bottom: 30px;
            color: var(--secondary-color);
        }

        p, li {
            font-size: 38px;
            line-height: 1.5;
            margin-bottom: 25px;
            color: #d1d5db;
        }

        strong {
            color: var(--accent-color);
            font-weight: 700;
        }

        ul, ol {
            list-style: none;
        }

        ul li {
            position: relative;
            padding-left: 50px;
            margin-bottom: 35px;
        }

        ul li::before {
            content: "â€¢";
            color: var(--accent-color);
            position: absolute;
            left: 0;
            font-size: 1.2em;
        }

        /* å¸ƒå±€è¾…åŠ© */
        .layout-center {
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .layout-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            height: 100%;
            align-content: center;
        }

        .col-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .card-title {
            font-size: 42px;
            color: var(--accent-color);
            margin-bottom: 20px;
            display: block;
            font-weight: bold;
        }

        .highlight-box {
            background: var(--highlight-bg);
            border-left: 8px solid var(--accent-color);
            padding: 40px;
            margin: 40px 0;
            border-radius: 0 20px 20px 0;
        }
        
        .formula {
            font-family: 'Courier New', Courier, monospace;
            font-size: 60px;
            text-align: center;
            color: #fff;
            background: rgba(0,0,0,0.3);
            padding: 30px;
            border-radius: 20px;
            border: 2px dashed var(--secondary-color);
        }

        /* è¡¨æ ¼æ ·å¼ */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 32px;
            margin-top: 20px;
        }

        th, td {
            padding: 20px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        th {
            color: var(--accent-color);
            font-size: 36px;
            border-bottom: 3px solid var(--accent-color);
        }
        
        td:first-child {
            font-weight: bold;
            color: var(--secondary-color);
        }

        /* å›¾æ ‡å¤§å°ºå¯¸ */
        .icon-large {
            font-size: 120px;
            color: var(--secondary-color);
            margin-bottom: 30px;
            display: block;
        }

        /* é¡µè„š */
        .footer {
            position: absolute;
            bottom: 30px;
            right: 40px;
            font-size: 24px;
            color: rgba(255, 255, 255, 0.4);
            z-index: 2;
        }

        /* ä»£ç å— */
        .code-block {
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            background: var(--code-bg);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #333;
            font-size: 28px;
            line-height: 1.6;
            color: #a5b3ce;
            white-space: pre;
            overflow-x: auto;
        }
        
        .code-keyword { color: #c678dd; }
        .code-type { color: #e5c07b; }
        .code-string { color: #98c379; }
        .code-comment { color: #5c6370; font-style: italic; }
        .code-number { color: #d19a66; }
        .code-func { color: #61afef; }

        /* å“ˆå¸Œå¯è§†åŒ– */
        .hash-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
        }
        .hash-node {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--secondary-color);
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 32px;
            text-align: center;
        }
        .hash-arrow {
            font-size: 40px;
            color: var(--accent-color);
        }
        .bucket-array {
            display: flex;
            flex-direction: column;
            gap: 10px;
            border: 2px solid #666;
            padding: 10px;
            border-radius: 10px;
        }
        .bucket-cell {
            width: 300px;
            height: 60px;
            border: 1px solid #444;
            display: flex;
            align-items: center;
            padding: 0 20px;
            font-size: 24px;
            background: rgba(0,0,0,0.3);
            position: relative;
        }
        .bucket-index {
            position: absolute;
            left: -40px;
            color: #888;
            font-family: monospace;
        }
        .chain-node {
            margin-left: 20px;
            background: var(--secondary-color);
            color: #000;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 20px;
            display: inline-flex;
            align-items: center;
        }

        /* å®ç”¨ç±» */
        .text-huge { font-size: 60px; }
        .text-center { text-align: center; }
        .mb-0 { margin-bottom: 0; }
        .mt-20 { margin-top: 40px; }
        .color-accent { color: var(--accent-color); }
        .color-warn { color: #ef4444; }
        .color-success { color: #10b981; }
    </style>
</head>
<body>

<div id="app">
    <div class="bg-decoration"></div>
    <div class="grid-overlay"></div>
    
    <!-- P01: å°é¢ -->
    <section class="slide active layout-center" data-title="å°é¢">
        <div style="text-align: center;">
            <i class="fas fa-hashtag icon-large" style="font-size: 220px; color: var(--accent-color); margin-bottom: 60px;"></i>
            <h1>æ•°æ®ç»“æ„ä¸ç®—æ³•</h1>
            <p class="text-huge" style="color: var(--secondary-color); font-size: 80px;">å“ˆå¸Œè¡¨ï¼šç©ºé—´æ¢æ—¶é—´çš„é­”æ³•å¸ˆ</p>
        </div>
    </section>

    <!-- P02: å¼•å…¥ï¼šæ•°ç»„çš„è¶…èƒ½åŠ›ä¸è½¯è‚‹ -->
    <section class="slide" data-title="å¼•å…¥ï¼šæ•°ç»„çš„è¶…èƒ½åŠ›ä¸è½¯è‚‹">
        <h2>æ•°ç»„çš„è¶…èƒ½åŠ› vs è½¯è‚‹</h2>
        <div class="layout-2col">
            <div class="col-content">
                <div class="card" style="border-color: var(--accent-color);">
                    <span class="card-title"><i class="fas fa-bolt"></i> è¶…èƒ½åŠ›ï¼šä¸‹æ ‡è®¿é—®</span>
                    <p>ç»™å®šä¸‹æ ‡ <code>i</code>ï¼Œç¬é—´å®šä½ã€‚</p>
                    <div class="formula" style="font-size: 40px;">arr[5] â†’ O(1)</div>
                    <p class="mb-0">åŸºäºå†…å­˜åœ°å€è®¡ç®—ï¼Œä¸ç”¨éå†ã€‚</p>
                </div>
            </div>
            <div class="col-content">
                <div class="card" style="border-color: #ef4444;">
                    <span class="card-title" style="color: #ef4444;"><i class="fas fa-search"></i> è½¯è‚‹ï¼šæŒ‰å€¼æŸ¥æ‰¾</span>
                    <p>ç»™å®šå­¦å· <code>2021001</code>ï¼Œæ‰¾å§“åï¼Ÿ</p>
                    <div class="formula" style="font-size: 40px; border-color: #ef4444;">for loop â†’ O(N)</div>
                    <p class="mb-0">å¿…é¡»ä»å¤´éå†ï¼Œæ•ˆç‡å´©å¡Œã€‚</p>
                </div>
            </div>
        </div>
        <div class="highlight-box" style="text-align: center;">
            <p class="mb-0" style="font-size: 42px;"><strong>ç›®æ ‡</strong>ï¼šèƒ½ä¸èƒ½åƒç”¨ä¸‹æ ‡ä¸€æ ·ï¼Œé€šè¿‡â€œå€¼â€ç¬é—´æ‰¾åˆ°æ•°æ®ï¼Ÿ</p>
        </div>
    </section>

    <!-- P03: ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ -->
    <section class="slide" data-title="ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨">
        <h2>ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ (Hash Table)</h2>
        <p>ä¸€ç§ç”¨ <strong>é”® (Key)</strong> å¿«é€Ÿå®šä½ <strong>å€¼ (Value)</strong> çš„æ•°æ®ç»“æ„ã€‚</p>
        
        <div class="hash-visual">
            <div class="hash-node">Key<br><span style="font-size: 24px; color: #888;">"apple"</span></div>
            <div class="hash-arrow">â†’</div>
            <div class="hash-node" style="border-color: var(--accent-color); color: var(--accent-color);">
                <i class="fas fa-cogs"></i> Hashå‡½æ•°
            </div>
            <div class="hash-arrow">â†’</div>
            <div class="hash-node">Index<br><span style="font-size: 24px; color: #888;">2</span></div>
            <div class="hash-arrow">â†’</div>
            <div class="bucket-array">
                <div class="bucket-cell"><span class="bucket-index">0</span></div>
                <div class="bucket-cell"><span class="bucket-index">1</span></div>
                <div class="bucket-cell" style="background: rgba(34, 211, 238, 0.2);"><span class="bucket-index">2</span> Value (Price: 5.0)</div>
                <div class="bucket-cell"><span class="bucket-index">3</span></div>
            </div>
        </div>

        <div class="layout-2col">
            <div class="col-content">
                <ul>
                    <li><strong>Key</strong>: æŸ¥æ‰¾çš„æ ‡è¯† (å¦‚å­¦å·)ã€‚</li>
                    <li><strong>Hash Function</strong>: è½¬æ¢å™¨ (Key â†’ æ•´æ•°)ã€‚</li>
                </ul>
            </div>
            <div class="col-content">
                <ul>
                    <li><strong>Bucket</strong>: å­˜å‚¨æ•°æ®çš„å®¹å™¨ (æ•°ç»„)ã€‚</li>
                    <li><strong>ç­–ç•¥</strong>: ç”¨ç©ºé—´(æ•°ç»„)æ¢æ—¶é—´(è®¡ç®—)ã€‚</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- P04: æ ¸å¿ƒæœºåˆ¶ -->
    <section class="slide" data-title="æ ¸å¿ƒæœºåˆ¶ï¼šå“ˆå¸Œå‡½æ•°">
        <h2>æ ¸å¿ƒæœºåˆ¶ï¼šå“ˆå¸Œå‡½æ•°</h2>
        <p>å°†ä»»æ„é•¿åº¦çš„è¾“å…¥ï¼Œè½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„è¾“å‡º (ä¸‹æ ‡)ã€‚</p>

        <div class="formula">
            Index = Hash(Key) % Capacity
        </div>

        <div class="layout-2col">
            <div class="col-content">
                <div class="code-block"><span class="code-comment">// ç®€å•çš„å­—ç¬¦ä¸²å“ˆå¸Œ</span>
<span class="code-type">unsigned int</span> simpleHash(<span class="code-type">char</span> *key, <span class="code-type">int</span> cap) {
    <span class="code-type">unsigned int</span> hash = <span class="code-number">0</span>;
    <span class="code-keyword">while</span> (*key) {
        hash = <span class="code-number">31</span> * hash + *key;<span class="code-comment"> // 31æ˜¯è´¨æ•°</span>
        key++;
    }
    <span class="code-keyword">return</span> hash % cap;
}</div>
            </div>
            <div class="col-content">
                <div class="highlight-box">
                    <p><strong>ä¸‰æ­¥èµ°ï¼š</strong></p>
                    <ol>
                        <li><strong>è½¬æ•´æ•°</strong>ï¼šæŠŠå­—ç¬¦ä¸²å˜æˆæ•°å­—ã€‚</li>
                        <li><strong>å–æ¨¡</strong>ï¼š<code>%capacity</code> ç¡®ä¿è½åœ¨æ•°ç»„èŒƒå›´å†…ã€‚</li>
                        <li><strong>å®šä½</strong>ï¼šæ‹¿åˆ°åˆæ³•çš„æ•°ç»„ä¸‹æ ‡ã€‚</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- P05: å“ˆå¸Œå†²çª -->
    <section class="slide" data-title="å°´å°¬çš„ç›¸é‡ï¼šå“ˆå¸Œå†²çª">
        <h2>å°´å°¬çš„ç›¸é‡ï¼šå“ˆå¸Œå†²çª (Collision)</h2>
        <div class="layout-2col">
            <div class="col-content">
                <h3>é¸½å·¢åŸç†</h3>
                <p>å¦‚æœé¸½å­æ¯”å·¢ç©´å¤šï¼Œè‚¯å®šæœ‰ä¸¤åªé¸½å­æŒ¤åœ¨ä¸€èµ·ã€‚</p>
                <div class="card" style="margin-top: 40px;">
                    <p class="mb-0">
                        Hash("apple") = 2<br>
                        Hash("banana") = 2
                    </p>
                    <p style="color: #ef4444; font-weight: bold; margin-top: 20px;">å†²çªå‘ç”Ÿäº†ï¼</p>
                </div>
            </div>
            <div class="col-content" style="align-items: center;">
                <div class="bucket-array">
                    <div class="bucket-cell"><span class="bucket-index">0</span></div>
                    <div class="bucket-cell"><span class="bucket-index">1</span></div>
                    <div class="bucket-cell" style="background: rgba(239, 68, 68, 0.2); height: 100px;">
                        <span class="bucket-index">2</span> 
                        <div style="display: flex; flex-direction: column;">
                            <span>ğŸ apple</span>
                            <span style="color: #ef4444;">ğŸŒ banana (???)</span>
                        </div>
                    </div>
                    <div class="bucket-cell"><span class="bucket-index">3</span></div>
                </div>
                <p style="margin-top: 20px; font-size: 30px;">åŒä¸€ä¸ªå‘ä½ï¼Œæ€ä¹ˆå­˜ä¸¤ä¸ªäººï¼Ÿ</p>
            </div>
        </div>
    </section>

    <!-- P06: è§£å†³æ–¹æ¡ˆï¼šæ‹‰é“¾æ³• -->
    <section class="slide" data-title="è§£å†³æ–¹æ¡ˆï¼šæ‹‰é“¾æ³•">
        <h2>è§£å†³æ–¹æ¡ˆï¼šæ‹‰é“¾æ³• (Separate Chaining)</h2>
        <p>æ¡¶é‡Œä¸ç›´æ¥å­˜æ•°æ®ï¼Œè€Œæ˜¯å­˜ä¸€ä¸ª<strong>é“¾è¡¨å¤´æŒ‡é’ˆ</strong>ã€‚</p>
        
        <div class="layout-2col">
            <div class="col-content">
                <div class="bucket-array" style="border: none;">
                    <div class="bucket-cell" style="width: 100%; overflow: visible; border: none; background: transparent;">
                        <div style="width: 80px; height: 80px; border: 2px solid #fff; display: flex; align-items: center; justify-content: center;">0</div>
                        <span style="margin: 0 20px;">â†’</span> NULL
                    </div>
                    <div class="bucket-cell" style="width: 100%; overflow: visible; border: none; background: transparent;">
                        <div style="width: 80px; height: 80px; border: 2px solid #fff; display: flex; align-items: center; justify-content: center;">1</div>
                        <span style="margin: 0 20px;">â†’</span> NULL
                    </div>
                    <div class="bucket-cell" style="width: 100%; overflow: visible; border: none; background: transparent;">
                        <div style="width: 80px; height: 80px; border: 2px solid var(--accent-color); background: rgba(34, 211, 238, 0.1); display: flex; align-items: center; justify-content: center;">2</div>
                        <span style="margin: 0 20px; color: var(--accent-color);">â†’</span> 
                        <div class="chain-node">apple</div> 
                        <span style="margin: 0 10px;">â†’</span>
                        <div class="chain-node">banana</div>
                        <span style="margin: 0 10px;">â†’</span> NULL
                    </div>
                </div>
            </div>
            <div class="col-content">
                <div class="highlight-box">
                    <ul>
                        <li><strong>æ’å…¥</strong>ï¼šè®¡ç®—ä¸‹æ ‡ â†’ æ‰¾åˆ°é“¾è¡¨å¤´ â†’ å¤´æ’æ³•/å°¾æ’æ³•æ”¾å…¥ã€‚</li>
                        <li><strong>æŸ¥æ‰¾</strong>ï¼šè®¡ç®—ä¸‹æ ‡ â†’ éå†è¯¥ä½ç½®çš„é“¾è¡¨ â†’ æ¯”å¯¹ Keyã€‚</li>
                    </ul>
                </div>
                <p>è™½ç„¶å‘ç”Ÿäº†å†²çªï¼Œä½†æ•°æ®éƒ½åœ¨ï¼Œåªæ˜¯å¤šèµ°å‡ æ­¥é“¾è¡¨ã€‚</p>
            </div>
        </div>
    </section>

    <!-- P07: ä»£ç å®ç°ï¼šå®šä¹‰ -->
    <section class="slide" data-title="ä»£ç å®ç°ï¼šç»“æ„ä½“">
        <h2>ä»£ç å®ç°ï¼šå®šä¹‰ç»“æ„ä½“</h2>
        <div class="layout-2col">
            <div class="col-content">
                <div class="code-block">
<span class="code-keyword">typedef</span> <span class="code-keyword">struct</span> Entry {
    <span class="code-type">char</span> *key;
    <span class="code-type">int</span> value;
    <span class="code-keyword">struct</span> Entry *next; <span class="code-comment">// é“¾è¡¨æŒ‡é’ˆ</span>
} Entry;

<span class="code-keyword">typedef</span> <span class="code-keyword">struct</span> {
    <span class="code-comment">// æŒ‡é’ˆæ•°ç»„ï¼šæ¯ä¸ªå…ƒç´ æ˜¯é“¾è¡¨å¤´</span>
    Entry *buckets[TABLE_SIZE]; 
} HashTable;</div>
            </div>
            <div class="col-content">
                <div class="card">
                    <span class="card-title">ç»“æ„è§£æ</span>
                    <ul>
                        <li><strong>Entry (èŠ‚ç‚¹)</strong>: å­˜å‚¨ Key, Value å’Œ Next æŒ‡é’ˆã€‚</li>
                        <li><strong>HashTable</strong>: ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å­˜çš„æ˜¯ <code>Entry*</code>ã€‚</li>
                    </ul>
                </div>
                <p>åˆå§‹åŒ–æ—¶ï¼Œè¦æŠŠæ‰€æœ‰ buckets ç½®ä¸º <code>NULL</code>ã€‚</p>
            </div>
        </div>
    </section>

    <!-- P08: ä»£ç å®ç°ï¼šæ’å…¥ -->
    <section class="slide" data-title="ä»£ç å®ç°ï¼šæ’å…¥ (Put)">
        <h2>ä»£ç å®ç°ï¼šæ’å…¥æ•°æ® (Put)</h2>
        <div class="layout-2col">
            <div class="col-content">
                <div class="code-block" style="font-size: 22px;"><span class="code-type">void</span> put(HashTable *table, <span class="code-type">char</span> *key, <span class="code-type">int</span> val) {
    <span class="code-type">int</span> idx = hash(key) % TABLE_SIZE;
    
    <span class="code-comment">// 1. éå†é“¾è¡¨ï¼Œæ£€æŸ¥ Key æ˜¯å¦å·²å­˜åœ¨</span>
    Entry *cur = table->buckets[idx];
    <span class="code-keyword">while</span> (cur) {
        <span class="code-keyword">if</span> (strcmp(cur->key, key) == <span class="code-number">0</span>) {
            cur->value = val; <span class="code-comment">// æ›´æ–°</span>
            <span class="code-keyword">return</span>;
        }
        cur = cur->next;
    }

    <span class="code-comment">// 2. ä¸å­˜åœ¨ï¼Œå¤´æ’æ³•æ’å…¥æ–°èŠ‚ç‚¹</span>
    Entry *new_node = malloc(<span class="code-keyword">sizeof</span>(Entry));
    new_node->key = strdup(key);
    new_node->value = val;
    new_node->next = table->buckets[idx]; <span class="code-comment">// æ¥æ—§å¤´</span>
    table->buckets[idx] = new_node;       <span class="code-comment">// æ¢æ–°å¤´</span>
}</div>
            </div>
            <div class="col-content">
                <div class="highlight-box">
                    <p><strong>é€»è¾‘æµç¨‹ï¼š</strong></p>
                    <ol>
                        <li>è®¡ç®— hash(key) å¾—åˆ°æ•°ç»„ä¸‹æ ‡ <strong>i</strong></li>
                        <li>æ‰¾åˆ° <strong>table[i]</strong> å¯¹åº”çš„é“¾è¡¨</li>
                        <li>éå†é“¾è¡¨ï¼š</li>
                        <ul>
                          <li>å¦‚æœå‘ç° Key å·²ç»å­˜åœ¨ï¼Œæ›´æ–° Value</li>
                          <li>å¦‚æœéå†å®Œæ²¡æ‰¾åˆ°ï¼Œå°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°é“¾è¡¨ä¸­</li>
                        </ul>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- P09: ä»£ç å®ç°ï¼šæŸ¥æ‰¾ -->
    <section class="slide" data-title="ä»£ç å®ç°ï¼šæŸ¥æ‰¾ (Get)">
        <h2>ä»£ç å®ç°ï¼šæŸ¥æ‰¾æ•°æ® (Get)</h2>
        <div class="layout-2col">
            <div class="col-content">
                <div class="code-block">
<span class="code-type">int</span> get(HashTable *table, <span class="code-type">char</span> *key) {
    <span class="code-type">int</span> idx = hash(key) % TABLE_SIZE;
    
    Entry *cur = table->buckets[idx];
    
    <span class="code-keyword">while</span> (cur) {
        <span class="code-keyword">if</span> (strcmp(cur->key, key) == <span class="code-number">0</span>) {
            <span class="code-keyword">return</span> cur->value; <span class="code-comment">// æ‰¾åˆ°äº†</span>
        }
        cur = cur->next;
    }
    
    <span class="code-keyword">return</span> <span class="code-number">-1</span>; <span class="code-comment">// æ²¡æ‰¾åˆ°</span>
}</div>
            </div>
            <div class="col-content">
                <p class="text-huge" style="color: var(--accent-color);">O(1) çš„ç§˜å¯†</p>
                <p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œé“¾è¡¨éå¸¸çŸ­ï¼ˆé•¿åº¦ 0 æˆ– 1ï¼‰ã€‚</p>
                <p>æ‰€ä»¥ while å¾ªç¯å‡ ä¹ä¸è€—æ—¶ï¼Œç¬é—´è¿”å›ã€‚</p>
            </div>
        </div>
    </section>

    <!-- P12: å…¸å‹åº”ç”¨ -->
    <section class="slide" data-title="å…¸å‹åº”ç”¨">
        <h2>å“ˆå¸Œè¡¨çš„å…¸å‹åº”ç”¨</h2>
        <div style="display: flex; justify-content: space-around; margin-top: 60px;">
            <div class="card" style="width: 30%;">
                <i class="fas fa-server icon-large"></i>
                <span class="card-title text-center">ç¼“å­˜ (Cache)</span>
                <p class="text-center">Redis æ ¸å¿ƒã€‚<br>é”®å€¼å¯¹æé€Ÿè¯»å†™ã€‚</p>
            </div>
            <div class="card" style="width: 30%;">
                <i class="fas fa-fingerprint icon-large"></i>
                <span class="card-title text-center">å”¯ä¸€æ€§ (Set)</span>
                <p class="text-center">å»é‡ã€åˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚<br>Set åº•å±‚å°±æ˜¯ Mapã€‚</p>
            </div>
            <div class="card" style="width: 30%;">
                <i class="fas fa-code icon-large"></i>
                <span class="card-title text-center">ç®—æ³•é¢˜</span>
                <p class="text-center">ä¸¤æ•°ä¹‹å’Œ (Two Sum)ã€‚<br>ç”¨ç©ºé—´æ¢æ—¶é—´ã€‚</p>
            </div>
        </div>
    </section>

    <!-- P13a: å®æˆ˜ï¼šä¸¤æ•°ä¹‹å’Œ (æš´åŠ›) -->
    <section class="slide" data-title="å®æˆ˜ï¼šä¸¤æ•°ä¹‹å’Œ (æš´åŠ›è§£æ³•)">
        <h2>å®æˆ˜ï¼šä¸¤æ•°ä¹‹å’Œ (æš´åŠ›è§£æ³•)</h2>
        <div class="layout-2col">
            <div class="col-content">
                <div class="highlight-box" style="margin-top:-20px;">
                    <p class="mb-0" style="font-size: 32px;"><strong>é¢˜ç›®</strong>ï¼šç»™å®šæ•°ç»„ <code>nums</code> å’Œç›®æ ‡å€¼ <code>target</code>ï¼Œæ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•´æ•°ä¸‹æ ‡ã€‚</p>
                </div>
                
                <div style="margin-top: 20px; color: #ccc; border: 1px dashed rgba(34, 211, 238, 0.3); padding: 20px; border-radius: 10px; background: rgba(34,211,238,0.05);">
                    <p class="mb-0" style="font-family: monospace;font-size:28px;">Input: nums = [2, 5, 7, 9], target = 12</p>
                    <p class="mb-0" style="font-family: monospace;font-size:28px; margin-top:10px;">Output: [1, 2] <span style="color: #666;">// 5 + 7 = 12</span></p>
                </div>

                <div class="card" style="border-color: #ef4444; margin-top: 30px;">
                    <span class="card-title" style="color: #ef4444;"><i class="fas fa-bomb"></i> æš´åŠ›æ€ç»´</span>
                    <p>å¯¹äºæ¯ä¸€ä¸ªæ•°ï¼Œéƒ½å»åé¢æ‰¾â€œå¦ä¸€åŠâ€ã€‚</p>
                    <div class="formula" style="font-size: 40px; border-color: #ef4444; color: #ef4444;">
                        O(NÂ²)
                    </div>
                </div>
            </div>
            <div class="col-content">
                <div class="code-block" style="font-size: 24px;">
<span class="code-keyword">int</span>* twoSumBrute(<span class="code-type">int</span>* nums, <span class="code-type">int</span> n, <span class="code-type">int</span> target) {
    <span class="code-keyword">for</span> (<span class="code-type">int</span> i = <span class="code-number">0</span>; i &lt; n - 1; i++) {
        <span class="code-comment">// å†…å±‚å¾ªç¯ï¼šå¯»æ‰¾å¦ä¸€åŠ</span>
        <span class="code-keyword">for</span> (<span class="code-type">int</span> j = i + <span class="code-number">1</span>; j &lt; n; j++) {
            <span class="code-keyword">if</span> (nums[i] + nums[j] == target) {
                <span class="code-keyword">return</span> <span class="code-func">result</span>(i, j);
            }
        }
    }
    <span class="code-keyword">return</span> NULL;
}</div>
            </div>
        </div>
    </section>

    <!-- P13b: å®æˆ˜ï¼šä¸¤æ•°ä¹‹å’Œ (å“ˆå¸Œ) -->
    <section class="slide" data-title="å®æˆ˜ï¼šä¸¤æ•°ä¹‹å’Œ (å“ˆå¸Œè§£æ³•)">
        <h2>å®æˆ˜ï¼šä¸¤æ•°ä¹‹å’Œ (å“ˆå¸Œè§£æ³•)</h2>
        <div class="layout-2col">
            <div class="col-content">
                <div class="code-block" style="font-size: 24px;"><span class="code-keyword">int</span>* twoSumHash(<span class="code-type">int</span>* nums, <span class="code-type">int</span> n, <span class="code-type">int</span> target) {
    <span class="code-comment">// Key: æ•°å€¼, Value: ä¸‹æ ‡</span>
    HashMap map = createMap(); 
    
    <span class="code-keyword">for</span> (<span class="code-type">int</span> i = <span class="code-number">0</span>; i &lt; n; i++) {
        <span class="code-type">int</span> pair = target - nums[i];
        <span class="code-comment">// 1. æŸ¥è¡¨ï¼šKVåŒ¹é…</span>
        <span class="code-keyword">if</span> (hasKey(map, pair)) {
            <span class="code-keyword">return</span> <span class="code-func">result</span>(get(map, pair), i);
        }
        <span class="code-comment">// 2. å­˜è¡¨ï¼šå°† {nums[i]: i} æ”¾å…¥ KV</span>
        put(map, nums[i], i);
    }
    <span class="code-keyword">return</span> NULL;
}</div>
                <div class="formula" style="font-size: 32px; margin-top: 20px; padding: 10px; border-color: var(--color-success);">
                    æ—¶é—´ O(N) | ç©ºé—´ O(N)
                </div>
            </div>
            
            <div class="col-content">
                <!-- åŠ¨ç”»åŒºåŸŸ -->
                <div class="card" style="border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <div class="anim-controls">
                            <button onclick="TwoSumAnim.prev()"><i class="fas fa-step-backward"></i></button>
                            <button onclick="TwoSumAnim.toggle()"><i class="fas fa-play"></i></button>
                            <button onclick="TwoSumAnim.next()"><i class="fas fa-step-forward"></i></button>
                            <button onclick="TwoSumAnim.reset()"><i class="fas fa-undo"></i></button>
                            <div class="anim-progress" id="ts-progress">0/0</div>
                        </div>
                    </div>

                    <div class="array-container" id="ts-array" style="margin-bottom: 50px;">
                        <!-- JS generated -->
                    </div>

                    <div class="info-panel" id="ts-info">
                        å‡†å¤‡å¼€å§‹...
                    </div>

                    <div style="display: flex; gap: 20px;">
                        <div style="flex: 1;">
                            <h4 style="color: var(--secondary-color); margin-bottom: 10px; font-size: 28px;"><i class="fas fa-map"></i> Hash Map (Key â†’ Value)</h4>
                            <div class="map-container" id="ts-map">
                                <!-- JS generated -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- P10: æ€§èƒ½åˆ†æ -->
    <section class="slide" data-title="æ€§èƒ½åˆ†æ">
        <h2>æ€§èƒ½åˆ†æï¼šå¤©å ‚åˆ°åœ°ç‹±</h2>
        <table>
            <thead>
                <tr>
                    <th>æ“ä½œ</th>
                    <th>å¹³å‡æƒ…å†µ (å¤©å ‚)</th>
                    <th>æœ€åæƒ…å†µ (åœ°ç‹±)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>æŸ¥æ‰¾ / æ’å…¥ / åˆ é™¤</td>
                    <td class="color-success"><strong>O(1)</strong></td>
                    <td class="color-warn"><strong>O(N)</strong></td>
                </tr>
            </tbody>
        </table>

        <div class="layout-2col mt-20">
            <div class="col-content">
                <div class="card" style="border-color: var(--accent-color);">
                    <span class="card-title">å¹³å‡æƒ…å†µ</span>
                    <p>å“ˆå¸Œå‡½æ•°åˆ†å¸ƒå‡åŒ€ï¼Œæ¯ä¸ªæ¡¶é‡Œåªæœ‰å¯¥å¯¥å‡ ä¸ªå…ƒç´ ã€‚</p>
                </div>
            </div>
            <div class="col-content">
                <div class="card" style="border-color: #ef4444;">
                    <span class="card-title" style="color: #ef4444;">æœ€åæƒ…å†µ</span>
                    <p>æ‰€æœ‰ Key å†²çªåˆ°åŒä¸€ä¸ªæ¡¶ï¼Œé€€åŒ–æˆ<strong>å•é“¾è¡¨</strong>ï¼</p>
                    <p style="font-size: 28px; color: #888;">(ä¾‹å¦‚ï¼šæ”»å‡»è€…æ„é€  HashDoS æ”»å‡»)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- P11: è¿›é˜¶ï¼šæ‰©å®¹ä¸æ ‘åŒ– -->
    <section class="slide" data-title="è¿›é˜¶ï¼šé˜²çº¿">
        <h2>å½“é“¾è¡¨å¤ªé•¿æ€ä¹ˆåŠï¼Ÿä¸¤é“é˜²çº¿</h2>
        
        <div class="layout-2col">
            <div class="col-content">
                <div class="highlight-box">
                    <span class="card-title">é˜²çº¿ä¸€ï¼šæ‰©å®¹ (Rehashing)</span>
                    <p>å½“ <strong>å…ƒç´ æ€»æ•° > æ•°ç»„å®¹é‡ Ã— 0.75</strong> æ—¶ï¼š</p>
                    <ol>
                        <li>æ•°ç»„å¤§å°ç¿»å€ã€‚</li>
                        <li>æ‰€æœ‰å…ƒç´ <strong>é‡æ–°è®¡ç®— Hash</strong>ï¼Œåˆ†æ•£åˆ°æ–°å®¶ã€‚</li>
                    </ol>
                    <p style="color: var(--secondary-color);">æ•ˆæœï¼šé“¾è¡¨å˜çŸ­ï¼Œæ¢å¤ O(1)ã€‚</p>
                </div>
            </div>
            <div class="col-content">
                <div class="highlight-box" style="border-color: var(--secondary-color);">
                    <span class="card-title">é˜²çº¿äºŒï¼šæ ‘åŒ– (Treeification)</span>
                    <p>å¦‚æœæ‰©å®¹äº†ï¼ŒæŸä¸ªæ¡¶çš„é“¾è¡¨è¿˜æ˜¯å¾ˆé•¿ï¼ˆHashDoS æ”»å‡»ï¼‰ï¼š</p>
                    <p>å°† <strong>é“¾è¡¨ â†’ çº¢é»‘æ ‘</strong> (Red-Black Tree)ã€‚</p>
                    <div class="formula" style="font-size: 32px; padding: 15px;">O(N) â†’ O(log N)</div>
                    <p style="font-size: 26px; color: #888;">(Java 8 HashMap ç­–ç•¥ï¼šé“¾è¡¨é•¿åº¦ > 8 æ—¶è½¬æ ‘)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- P14: å°ç»“ä¸é¢„å‘Š -->
    <section class="slide" data-title="å°ç»“ä¸é¢„å‘Š">
        <h2>è¯¾å ‚å°ç»“ & ä¸‹èŠ‚é¢„å‘Š</h2>
        <div class="layout-2col">
            <div class="col-content">
                <div class="highlight-box">
                    <span class="card-title" style="color: var(--accent-color);">å“ˆå¸Œè¡¨æ ¸å¿ƒè¦ç‚¹</span>
                    <ul style="margin-top: 30px; font-size: 38px;">
                        <li><strong>æ•°ç»„</strong>ï¼šæä¾› O(1) è®¿é—®çš„â€œåœ°åŸºâ€ã€‚</li>
                        <li><strong>å“ˆå¸Œ</strong>ï¼šå°† Key æ˜ å°„ä¸ºä¸‹æ ‡çš„â€œå¯¼èˆªâ€ã€‚</li>
                        <li><strong>é“¾è¡¨</strong>ï¼šè§£å†³å“ˆå¸Œå†²çªçš„â€œå…œåº•æ–¹æ¡ˆâ€ã€‚</li>
                    </ul>
                    <div class="formula" style="font-size: 32px; margin: 40px 0; padding: 20px;">
                        ç©ºé—´(æ•°ç»„) â‡„ æ—¶é—´(è®¡ç®—)
                    </div>
                </div>
            </div>
            <div class="col-content">
                <div class="card" style="border-color: var(--secondary-color); background: rgba(167, 139, 250, 0.05);">
                    <span class="card-title" style="color: var(--secondary-color);">æ€è€ƒä¸å±•æœ›</span>
                    <p>çº¢é»‘æ ‘æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆé“¾è¡¨å˜æˆçº¢é»‘æ ‘åï¼ŒæŸ¥è¯¢é€Ÿåº¦å°±èƒ½å˜æˆO(log n)ï¼Ÿ</p>
                    
                    <div style="text-align: center; margin-top: 60px;">
                        <p style="font-size: 36px; margin-bottom: 20px;">ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†å­¦ä¹ </p>
                        <p style="font-size: 48px; font-weight: bold; color: #fff;">é«˜æ•ˆçš„éçº¿æ€§ç»“æ„ï¼š<span style="color: var(--secondary-color);">Tree (æ ‘)</span></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <div class="footer">
        <span id="page-number">1 / 15</span>
    </div>

</div>

<script>
    // å¹»ç¯ç‰‡é€»è¾‘
    const slides = document.querySelectorAll('.slide');
    const pageNumberEl = document.getElementById('page-number');
    const totalSlides = slides.length;

    // ä» URL è·å–é¡µç 
    function getPageFromUrl() {
        const params = new URLSearchParams(window.location.search);
        const page = parseInt(params.get('page'));
        if (!isNaN(page) && page >= 1 && page <= totalSlides) {
            return page - 1;
        }
        return 0;
    }

    let currentSlide = getPageFromUrl();

    function updateSlide() {
        slides.forEach((slide, index) => {
            slide.classList.remove('active');
            if (index === currentSlide) {
                slide.classList.add('active');
            }
        });
        pageNumberEl.textContent = `${currentSlide + 1} / ${totalSlides}`;
        
        try {
            const url = new URL(window.location.href);
            url.searchParams.set('page', currentSlide + 1);
            window.history.replaceState(null, '', url.href);
        } catch (e) {
            console.error('URL update failed:', e);
        }
    }

    function nextSlide() {
        if (currentSlide < totalSlides - 1) {
            currentSlide++;
            updateSlide();
        }
    }

    function prevSlide() {
        if (currentSlide > 0) {
            currentSlide--;
            updateSlide();
        }
    }

    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'Enter') {
            nextSlide();
        } else if (e.key === 'ArrowLeft') {
            prevSlide();
        }
    });

    function resizeApp() {
        const app = document.getElementById('app');
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        const scaleX = windowWidth / 1920;
        const scaleY = windowHeight / 1080;
        const scale = Math.min(scaleX, scaleY);
        
        app.style.transform = `scale(${scale})`;
    }

    window.addEventListener('resize', resizeApp);
    
    resizeApp(); 
    updateSlide();

    // ==========================================
    // Animation Engine
    // ==========================================
    class AnimationManager {
        constructor() {
            this.snapshots = []; 
            this.currentStep = 0;
            this.timer = null;
            this.isPlaying = false;
            this.renderFn = null;
            this.uiIds = {};
        }

        init(snapshots, renderFn, uiIds) {
            this.snapshots = snapshots;
            this.renderFn = renderFn;
            this.uiIds = uiIds;
            this.currentStep = 0;
            this.render();
            this.updateUI();
        }

        next() {
            this.stop();
            if (this.currentStep < this.snapshots.length - 1) {
                this.currentStep++;
                this.render();
                this.updateUI();
            }
        }

        prev() {
            this.stop();
            if (this.currentStep > 0) {
                this.currentStep--;
                this.render();
                this.updateUI();
            }
        }

        reset() {
            this.stop();
            this.currentStep = 0;
            this.render();
            this.updateUI();
        }

        toggle() {
            if (this.isPlaying) this.stop();
            else this.play();
        }

        play() {
            if (this.currentStep >= this.snapshots.length - 1) {
                this.currentStep = 0;
            }
            this.isPlaying = true;
            this.tick();
        }

        stop() {
            this.isPlaying = false;
            if (this.timer) clearTimeout(this.timer);
        }

        tick() {
            if (!this.isPlaying) return;
            const delay = this.snapshots[this.currentStep].delay || 1000;
            this.render();
            this.updateUI();
            
            this.timer = setTimeout(() => {
                if (!this.isPlaying) return;
                if (this.currentStep < this.snapshots.length - 1) {
                    this.currentStep++;
                    this.tick();
                } else {
                    this.stop();
                }
            }, delay);
        }

        render() {
            if (this.renderFn && this.snapshots[this.currentStep]) {
                this.renderFn(this.snapshots[this.currentStep], this.uiIds);
            }
        }

        updateUI() {
            const el = document.getElementById(this.uiIds.progress);
            if (el) {
                el.textContent = `${this.currentStep} / ${this.snapshots.length - 1}`;
            }
        }
    }

    const TwoSumAnim = new AnimationManager();

    // Two Sum Logic
    function initTwoSumAnim() {
        const nums = [2, 5, 7, 9];
        const target = 12;
        const snapshots = [];
        let map = {};

        // Initial state
        snapshots.push({
            idx: -1,
            map: {},
            desc: "å¼€å§‹ï¼šæ•°ç»„ nums=[2, 5, 7, 9], target=12",
            found: null,
            delay: 1000
        });

        for (let i = 0; i < nums.length; i++) {
            const x = nums[i];
            const need = target - x;
            
            // Step 1: Check
            snapshots.push({
                idx: i,
                map: {...map},
                desc: `æ­¥éª¤ ${i+1}-1: å½“å‰æ•° ${x}ã€‚Map é‡Œæœ‰ ${need} (å³ 12-${x}) å—ï¼Ÿ`,
                found: null,
                delay: 2000
            });

            if (map.hasOwnProperty(need)) {
                // Found
                snapshots.push({
                    idx: i,
                    map: {...map},
                    desc: `æ‰¾åˆ°å•¦ï¼Map ä¸­å­˜åœ¨ Key=${need} (ä¸‹æ ‡ ${map[need]})ã€‚`,
                    found: [map[need], i], // indices
                    delay: 3000
                });
                break; // Stop loop
            }

            // Step 2: Put
            snapshots.push({
                idx: i,
                map: {...map},
                desc: `æ²¡æ‰¾åˆ°ã€‚å°†å½“å‰æ•° ${x} (ä¸‹æ ‡ ${i}) å­˜å…¥ Mapï¼Œç­‰å¾…æœ‰ç¼˜äººã€‚`,
                found: null,
                delay: 1500
            });

            map[x] = i;

            // Step 3: Updated Map
            snapshots.push({
                idx: i,
                map: {...map},
                desc: `Map å·²æ›´æ–°ã€‚ç»§ç»­ä¸‹ä¸€ä¸ª...`,
                found: null,
                delay: 1000
            });
        }

        TwoSumAnim.init(snapshots, renderTwoSum, {
            container: 'ts-array',
            map: 'ts-map',
            info: 'ts-info',
            progress: 'ts-progress'
        });
    }

    function renderTwoSum(state, uiIds) {
        const nums = [2, 5, 7, 9];
        
        // 1. Render Array
        const arrContainer = document.getElementById(uiIds.container);
        if (arrContainer) {
            arrContainer.innerHTML = '';
            nums.forEach((val, i) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.textContent = val;
                
                const idxSpan = document.createElement('span');
                idxSpan.className = 'array-index';
                idxSpan.textContent = i;
                cell.appendChild(idxSpan);

                if (i === state.idx) {
                    cell.classList.add('active');
                }
                if (state.found && state.found.includes(i)) {
                    cell.classList.add('found');
                    cell.style.borderColor = '#10b981';
                }
                arrContainer.appendChild(cell);
            });
        }

        // 2. Render Map
        const mapContainer = document.getElementById(uiIds.map);
        if (mapContainer) {
            mapContainer.innerHTML = '';
            if (Object.keys(state.map).length === 0) {
                mapContainer.innerHTML = '<div style="color:#666; text-align:center; padding-top:20px; font-size:24px;">(ç©º)</div>';
            } else {
                for (let key in state.map) {
                    const item = document.createElement('div');
                    item.className = 'map-item';
                    item.innerHTML = `<span>Key: ${key}</span> <span style="color:#888;">â†’</span> <span>Val: ${state.map[key]}</span>`;
                    
                    // Highlight if it's the found one
                    if (state.found) {
                         const currentVal = nums[state.found[1]];
                         const complement = 12 - currentVal;
                         if (parseInt(key) === complement) {
                             item.classList.add('highlight');
                         }
                    }
                    mapContainer.appendChild(item);
                }
            }
        }

        // 3. Info
        const infoEl = document.getElementById(uiIds.info);
        if (infoEl) infoEl.textContent = state.desc;
    }

    // Initialize after load
    window.addEventListener('load', initTwoSumAnim);

</script>

</body>
</html>
